"use strict";(self.webpackChunkwaxdevelopers=self.webpackChunkwaxdevelopers||[]).push([[2715],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>h});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(o),k=r,h=u["".concat(l,".").concat(k)]||u[k]||d[k]||a;return o?n.createElement(h,i(i({ref:t},p),{},{components:o})):n.createElement(h,i({ref:t},p))}));function h(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=k;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<a;c++)i[c]=o[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}k.displayName="MDXCreateElement"},5438:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var n=o(7462),r=(o(7294),o(3905));const a={title:"Set Up a WAX Testnet Block Producer Node",nav_order:144,layout:"default",parent:"WAX Infrastructure Guides","lang-ref":"Set Up a WAX Testnet Block Producer Node",lang:"en"},i=void 0,s={unversionedId:"wax-infrastructure/wax-testnet-block-producer",id:"wax-infrastructure/wax-testnet-block-producer",title:"Set Up a WAX Testnet Block Producer Node",description:"Providing API and Seed services are key to being part of the WAX service provider Ecosystem, however to be rewarded for your efforts and to participate in the governance of the chain you will need to become a  WAX Testnet Block Producer.",source:"@site/docs/wax-infrastructure/wax-testnet-block-producer.md",sourceDirName:"wax-infrastructure",slug:"/wax-infrastructure/wax-testnet-block-producer",permalink:"/waxdevelopers_test/docs/wax-infrastructure/wax-testnet-block-producer",draft:!1,editUrl:"https://github.com/wax-office-of-inspector-general/wax-developer/tree/main/docs/wax-infrastructure/wax-testnet-block-producer.md",tags:[],version:"current",frontMatter:{title:"Set Up a WAX Testnet Block Producer Node",nav_order:144,layout:"default",parent:"WAX Infrastructure Guides","lang-ref":"Set Up a WAX Testnet Block Producer Node",lang:"en"},sidebar:"tutorialSidebar",previous:{title:"Using WAX Snapshots",permalink:"/waxdevelopers_test/docs/wax-infrastructure/wax-snapshots"},next:{title:"Set Up a WAX Testnet Node",permalink:"/waxdevelopers_test/docs/wax-infrastructure/wax-testnet-node"}},l={},c=[{value:"Environment",id:"environment",level:2},{value:"Getting a Testnet Account",id:"getting-a-testnet-account",level:2},{value:"Import your account key to keosd",id:"import-your-account-key-to-keosd",level:2},{value:"Configure the Block Producer Node",id:"configure-the-block-producer-node",level:2},{value:"Registering your Block Producer Account",id:"registering-your-block-producer-account",level:2}],p={toc:c},u="wrapper";function d(e){let{components:t,...o}=e;return(0,r.kt)(u,(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Providing API and Seed services are key to being part of the WAX service provider Ecosystem, however to be rewarded for your efforts and to participate in the governance of the chain you will need to become a  ",(0,r.kt)("strong",{parentName:"p"},"WAX Testnet Block Producer.")),(0,r.kt)("p",null,"This guide will show you how to configure a WAX Testnet Block Production Node and register your account as a WAX Testnet Block Producer."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"This article has been updated to incorporate the")," ",(0,r.kt)("a",{parentName:"p",href:"https://antelope.io/"},(0,r.kt)("em",{parentName:"a"},"Antelope"))," ",(0,r.kt)("em",{parentName:"p"},"Leap software build process.")),(0,r.kt)("h1",{id:"how-to-set-up-a-wax-testnet-block-producer-node"},"How to Set Up a WAX Testnet Block Producer Node"),(0,r.kt)("p",null,"In this example we will be using the same WAX software build process for the Block Producer Node and Cleos Interface Node as used in the ",(0,r.kt)("strong",{parentName:"p"},"Set Up a WAX Testnet Node guide"),"."),(0,r.kt)("p",null,"The Block Producer Node also needs to be configured and sync\u2019d up to the WAX Testnet precisely the same as the first WAX guide, additional configuration will be applied later in this example."),(0,r.kt)("h2",{id:"environment"},"Environment"),(0,r.kt)("p",null,"There is consensus amongst Block Producers that best practice for any Antelope production deployment is that each node serve a specific function. In particular the Block Producer Node should not be publicly accessible or used as a Public API or Peer."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"In this example we will have three different nodes serving specific functions:")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Public API and Peer Node"),(0,r.kt)("br",{parentName:"p"}),"\n","This is the Node created in the First WAX How To Article and will be used to provide public API and Peer services.",(0,r.kt)("br",{parentName:"p"}),"\n","It will need to be Sync\u2019d to the current WAX Testnet Headblock"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Block Producer Node"),(0,r.kt)("br",{parentName:"p"}),"\n","This is the Node used to securely sign blocks on the WAX Testnet and the main additional production Node in this example.",(0,r.kt)("br",{parentName:"p"}),"\n","It will need to be Sync\u2019d to the current WAX Testnet Headblock.  "),(0,r.kt)("p",null,"In addition to configuring the latest available ",(0,r.kt)("a",{parentName:"p",href:"https://validate.eosnation.io/waxtest/reports/config.html"},"peer list")," of trusted Guilds published by EOSNation, it is a good idea to allow it to peer to your own Public Peer Node or Blocks Only Node."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Cleos Interface Node"),(0,r.kt)("br",{parentName:"p"}),"\n","This Node is completely private and used to interact with the Public Testnet Network via command line. Ubuntu Terminal / MacOS Terminal / Windows Ubuntu Shell are great lightweight OS\u2019s for running this private interface."),(0,r.kt)("p",null,"Two WAX software included applications are used:  ",(0,r.kt)("inlineCode",{parentName:"p"},"cleos"),"  which is the command line interface for the WAX software and  ",(0,r.kt)("inlineCode",{parentName:"p"},"keosd"),"  which is essentially a wallet / key manager service daemon for storing private keys and signing digital messages. You can find the WAX Software binary\u2019s here:  ",(0,r.kt)("inlineCode",{parentName:"p"},"~/wax-leap/build/programs/")),(0,r.kt)("p",null,"As you will be importing your private keys into  ",(0,r.kt)("inlineCode",{parentName:"p"},"keosd"),"  it is important that this Node is secured and treated as private."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"cleos"),"  uses your keys imported into  ",(0,r.kt)("inlineCode",{parentName:"p"},"keosd"),"  as authority to execute privileged actions on the network through an API running in  ",(0,r.kt)("inlineCode",{parentName:"p"},"nodeos")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://miro.medium.com/max/700/0*kTx5FtBH8o4Vxshw.png",alt:null})),(0,r.kt)("p",null,"The above diagram shows the relationship between WAX Software applications."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"It must be noted that there have been a few reported instances of API queries/actions not working as intended when trying to use older version")," ",(0,r.kt)("inlineCode",{parentName:"p"},"_cleos_")," ",(0,r.kt)("em",{parentName:"p"},"and")," ",(0,r.kt)("inlineCode",{parentName:"p"},"_keosd_")," ",(0,r.kt)("em",{parentName:"p"},"with an updated Leap 3.x node. Advice is to ensure you use the 3.x version of")," ",(0,r.kt)("inlineCode",{parentName:"p"},"_cleos_")," ",(0,r.kt)("em",{parentName:"p"},"and")," ",(0,r.kt)("inlineCode",{parentName:"p"},"_keosd_")," ",(0,r.kt)("em",{parentName:"p"},"with Leap 3.x nodes.")),(0,r.kt)("h2",{id:"getting-a-testnet-account"},"Getting a Testnet Account"),(0,r.kt)("p",null,"A WAX Testnet Block Producer requires an account to be created that can be used to register intent to become a producer that token holders are able to vote for."),(0,r.kt)("p",null,"There is a cost in WAX Testnet Tokens associated with registering an account, however you need an account to hold tokens. This would be problematic.. but there is a very handy  ",(0,r.kt)("a",{parentName:"p",href:"https://waxsweden.org/create-testnet-account/"},"WAX Testnet Account Creator and Faucet"),"  provided by  ",(0,r.kt)("a",{parentName:"p",href:"https://waxsweden.org/"},"WAX Sweden"),"  that can be used to easily create your first account and fill it with WAX Testnet Tokens."),(0,r.kt)("p",null,"Run the following curl requests on your on Cleos Node to create and fund your account , obviously supplementing with your desired account name:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'> curl https://faucet.waxsweden.org/create_account?eospherewoot\n\n{"msg": "succeeded", "keys": {"active_key": {"public": "EOS8PSfvq342YTVtogNVskjCttpx1rQX9JT59wQuLt2Nkz16ZmsL4", "private": "5JZsTE4LzwbHKLX25n3D4gSYVtB5AxyDgGGrUPaMWpAmbWveu72"}, "owner_key": {"public": "EOS7gjEzaYfd9FeSU8BzREgrLQz4QwizFfsKDJtgswCwwyhgX6dqa", "private": "5J7zm5kfBkhhuSnzxxxxxxxxxxxxxxxxxxxxxxnmi73eh8ANLzpB"}}, "account": "eospherewoot"}\n\n> curl https://faucet.waxsweden.org/get_token?eospherewoot\n\n{"msg": "succeeded"}\n')),(0,r.kt)("p",null,"You are presented with two key pairs,  ",(0,r.kt)("em",{parentName:"p"},"active_key"),"  and  ",(0,r.kt)("em",{parentName:"p"},"owner_key"),"  .. keep both of these pairs safely stored in this example we will be using the  ",(0,r.kt)("em",{parentName:"p"},"active_key"),"."),(0,r.kt)("h2",{id:"import-your-account-key-to-keosd"},"Import your account key to keosd"),(0,r.kt)("p",null,"Now that we have an account lets\u2019s import it to a  ",(0,r.kt)("inlineCode",{parentName:"p"},"keosd"),"  wallet so we can use it with  ",(0,r.kt)("inlineCode",{parentName:"p"},"cleos")),(0,r.kt)("p",null,"On your Cleos Node Create a WAX Testnet Wallet and import your account key:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'> cleos wallet create -n waxtestnet --to-console\n\nCreating wallet: waxtestnet\n\nSave password to use in the future to unlock this wallet.  \nWithout password imported keys will not be retrievable.  \n"PW5JoPmniazjAH3RTx4gcR5njKvPP6or8k7VzXu8ffGwwsFxqSGYN"\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"keosd"),"  is automatically started (you may have to make sure it\u2019s in the local path) .. the wallet is then created. This password is for your local wallet called waxtestnet, keep is safe. By default the wallets are stored here:  ",(0,r.kt)("inlineCode",{parentName:"p"},"~/eosio-wallet")),(0,r.kt)("p",null,"Import your active account key:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"#Unlock your wallet with the password from before  \n> cleos wallet unlock -n waxtestnet  \npassword: Unlocked: waxtestnet\n\n#Import your active_key : private  \n> cleos wallet import -n waxtestnet  \nprivate key: imported private key for: EOS8PSfvq342YTVtogNVskjCttpx1rQX9JT59wQuLt2Nkz16ZmsL4\n")),(0,r.kt)("h2",{id:"configure-the-block-producer-node"},"Configure the Block Producer Node"),(0,r.kt)("p",null,"As already mentioned previously the Block Producer Node needs some specific configuration that enables block signing."),(0,r.kt)("p",null,"Firstly we need a key-pair specifically for signing use, which can be accomplished using the Cleos Node:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"> cleos create key --to-console  \nPrivate key: 5JVfLEuHuoVkEX6CyScPHNLgxtRdUcdLp3hqzrXC54xVjtESFXX  \nPublic key: EOS6HWBC39JAXaRo5aG5yAcAjgQYhQ44T5GtcxJVbZFZox6FFa15k\n")),(0,r.kt)("p",null,"Next configure the  ",(0,r.kt)("inlineCode",{parentName:"p"},"config.ini"),"  on your Block Producer Node with the following block production additions specific to your deployment:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"#This is your BP account name  \nproducer-name = eospherewoot\n\n#This is your block signing key-pair  \nsignature-provider = EOS6HWBC39JAXaRo5aG5yAcAjgQYhQ44T5GtcxJVbZFZox6FFa15k=KEY:5JVfLEuHuoVkEX6CyScPHNLgxtRdUcdLp3hqzrXC54xVjtESFXX\n\n#Optimises hand off by producing a bit earlier  \nlast-block-time-offset-us = -200000\n\n#Lowers CPU time available on last block for better hand off  \nlast-block-cpu-effort-percent = 20\n\n#Enables block production on this node  \nplugin = eosio::producer_plugin\n")),(0,r.kt)("p",null,"Now restart  ",(0,r.kt)("inlineCode",{parentName:"p"},"nodeos"),"  on your Block Producer Node and ensure it catches back up to the headblock."),(0,r.kt)("p",null,"You can check on both your  ",(0,r.kt)("inlineCode",{parentName:"p"},"nodeos"),"  Nodes by querying them from your Cleos Node to ensure they are in a good state.. and on the correct chain:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'> cleos -u https://wax-testnet.eosphere.io get info\n\n{  \n  "server_version": "b5344cde",  \n  "chain_id": "f16b1833c747c43682f4386fca9cbb327929334a762755ebec17f6f23c9b8a12",  \n  "head_block_num": 111813838,  \n  "last_irreversible_block_num": 111813507,  \n  "last_irreversible_block_id": "06aa23838410642de5d297e95a410d68ab9076028fa444c464c48172031f364d",  \n  "head_block_id": "06aa24cea654e6250d87e41872f6754000c60226e9a490803186497e0ad70609",  \n  "head_block_time": "2021-09-16T05:17:33.000",  \n  "head_block_producer": "blacklusionx",  \n  "virtual_block_cpu_limit": 200000000,  \n  "virtual_block_net_limit": 1048576000,  \n  "block_cpu_limit": 199900,  \n  "block_net_limit": 1048576,  \n  "server_version_string": "v2.0.12wax01",  \n  "fork_db_head_block_num": 111813838,  \n  "fork_db_head_block_id": "06aa24cea654e6250d87e41872f6754000c60226e9a490803186497e0ad70609",  \n  "server_full_version_string": "v2.0.12wax01-b5344cde06837726fef9e384fcedc207dcf6b160"  \n}\n')),(0,r.kt)("h2",{id:"registering-your-block-producer-account"},"Registering your Block Producer Account"),(0,r.kt)("p",null,"Now that you are sure all is correctly configured and your Nodes are in sync with the network, you can register your intent to sign blocks and allow token holders to vote for you."),(0,r.kt)("p",null,"Before you execute the  ",(0,r.kt)("inlineCode",{parentName:"p"},"regproducer"),"  action, now is probably a good time to advertise your intent to the rest of the WAX Testnet Community."),(0,r.kt)("p",null,"There is a  ",(0,r.kt)("a",{parentName:"p",href:"https://t.me/waxtestnet"},"WAX Testnet Telegram Group"),"  where you can interact with other Block Producers, Service Providers and DApp builders."),(0,r.kt)("p",null,"There has been some testing recently in regards to optimum path hand-over between Block Production Nodes across the globe, if you advise in the Telegram of where your Node is located in the world one of the Testnet BP\u2019s will assign you a location number that helps the network."),(0,r.kt)("p",null,"Also you will need to be voted into the #21 to be able to produce blocks, the Telegram Group is the place to ask for these votes as well."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://miro.medium.com/max/700/1*laC7JQ7-9kSxeqP9yi9Ffg.png",alt:null})),(0,r.kt)("p",null,"Execute the  ",(0,r.kt)("inlineCode",{parentName:"p"},"regproducer"),"  action as below with your specifc details:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"#The last number is your assigned location  \n> cleos -u [https://wax-testnet.eosphere.io](https://wax-testnet.eosphere.io/) system regproducer eospherewoot EOS6HWBC39JAXaRo5aG5yAcAjgQYhQ44T5GtcxJVbZFZox6FFa15k [https://www.eosphere.io](https://www.eosphere.io/) 21\n")),(0,r.kt)("p",null,"As the action is executed on the block-chain level you can actually point your request to any sync\u2019d testnet API i.e you don\u2019t have to execute this action on your own Nodes."),(0,r.kt)("p",null,"If/When you have been voted into the top #21 your  ",(0,r.kt)("inlineCode",{parentName:"p"},"nodeos"),"  output will look something like this for 12 blocks in a round:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"info  2021-09-16T05:36:01.541 nodeos    producer_plugin.cpp:377       on_incoming_block    ] Received block e23bca90f0e6bc3d... #111816053 @ 2021-09-16T05:36:01.500 signed by eospherewoot [trxs: 0, lib: 111815725, conf: 0, latency: 41 ms]  \ninfo  2021-09-16T05:36:02.042 nodeos    producer_plugin.cpp:377       on_incoming_block    ] Received block c6d4ac08300ed117... #111816054 @ 2021-09-16T05:36:02.000 signed by eospherewoot [trxs: 0, lib: 111815725, conf: 0, latency: 42 ms]\n")),(0,r.kt)("hr",null),(0,r.kt)("p",null,"These ",(0,r.kt)("strong",{parentName:"p"},"WAX Developer Technical Guides")," are created using source material from the ",(0,r.kt)("a",{parentName:"p",href:"https://medium.com/eosphere/wax-technical-how-to/home"},"EOSphere WAX Technical How To Series")),(0,r.kt)("p",null,"Be sure to ask any questions in the  ",(0,r.kt)("a",{parentName:"p",href:"https://t.me/eosphere_io"},"EOSphere Telegram")))}d.isMDXComponent=!0}}]);